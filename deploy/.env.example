# Messenger Application Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================
# Application Configuration
# =============================================
APP_ENV=production
APP_PORT=8080
LOG_LEVEL=info

# =============================================
# Domain Configuration
# =============================================
DOMAIN=localhost
# For production, set your actual domain:
# DOMAIN=messenger.example.com
# EMAIL=admin@example.com

# External IP for TURN server (auto-detect or set manually)
EXTERNAL_IP=auto

# =============================================
# Database Configuration
# =============================================
POSTGRES_DB=messenger
POSTGRES_USER=messenger
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Database connection for application
DB_HOST=postgres
DB_PORT=5432
DB_NAME=messenger
DB_USER=messenger
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
DB_MAX_CONNECTIONS=100
DB_MAX_IDLE_CONNECTIONS=10

# =============================================
# Redis Configuration
# =============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================
# JWT Configuration
# =============================================
# Generate with: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET_KEY
JWT_EXPIRE_HOURS=24
JWT_REFRESH_EXPIRE_HOURS=168

# =============================================
# File Upload Configuration
# =============================================
UPLOAD_MAX_SIZE_MB=50
UPLOAD_MAX_SIZE_MB_PREMIUM=500
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/ogg,application/pdf

# Media storage path
MEDIA_PATH=/app/media

# =============================================
# Rate Limiting
# =============================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_REQUESTS_PREMIUM=1000
RATE_LIMIT_WINDOW_MINUTES=1

# =============================================
# CORS Configuration
# =============================================
CORS_ORIGINS=*
# For production, restrict to your domain:
# CORS_ORIGINS=https://messenger.example.com,https://www.messenger.example.com

# =============================================
# TURN Server Configuration
# =============================================
TURN_USERNAME=turnuser
TURN_PASSWORD=CHANGE_ME_TURN_PASSWORD
TURN_REALM=messenger.local

# =============================================
# Premium Subscription Configuration (MVP)
# =============================================
PREMIUM_MONTHLY_PRICE=4.99
PREMIUM_YEARLY_PRICE=49.99

# MVP Note: Payments are stubbed - no real charges
# Real payment integration planned for stage 2
PAYMENT_MODE=stub

# =============================================
# Feature Flags
# =============================================
ENABLE_REGISTRATION=true
ENABLE_CHANNELS=true
ENABLE_GROUPS=true
ENABLE_VOICE_CALLS=true
ENABLE_VIDEO_CALLS=true

# E2E Encryption (planned for stage 3-4)
ENABLE_E2E_ENCRYPTION=false

# =============================================
# Monitoring & Logging
# =============================================
ENABLE_METRICS=true
METRICS_PORT=9090

# Log format (json or text)
LOG_FORMAT=json

# =============================================
# Email Configuration (for notifications)
# =============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@messenger.local

# =============================================
# Security
# =============================================
BCRYPT_COST=12
SESSION_CLEANUP_INTERVAL_HOURS=24

# =============================================
# Cleanup & Maintenance
# =============================================
# Delete media files from deleted messages after X days
MEDIA_RETENTION_DAYS=30

# Cleanup interval in hours
CLEANUP_INTERVAL_HOURS=24
